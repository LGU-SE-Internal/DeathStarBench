docker build -t media-microservices:latest .
[+] Building 73.0s (19/20)                                                                                                            docker:default
 => [internal] load build definition from Dockerfile                                                                                            0.1s
 => => transferring dockerfile: 5.62kB                                                                                                          0.0s
 => [internal] load metadata for docker.io/library/ubuntu:16.04                                                                                 0.5s
 => [internal] load .dockerignore                                                                                                               0.1s
 => => transferring context: 134B                                                                                                               0.0s
 => [internal] load build context                                                                                                               0.2s
 => => transferring context: 191.67kB                                                                                                           0.0s
 => [deps-builder  1/13] FROM docker.io/library/ubuntu:16.04@sha256:1f1a2d56de1d604801a9671f301190704c25d604a416f59e03c04f5c6ffee0d6            0.0s
 => CACHED [deps-builder  2/13] RUN apt-get update && apt-get install -y ca-certificates g++ wget git libmemcached-dev automake bison flex lib  0.0s
 => CACHED [deps-builder  3/13] RUN cd /tmp   && wget https://github.com/Kitware/CMake/releases/download/v3.20.0/cmake-3.20.0-linux-x86_64.tar  0.0s
 => CACHED [deps-builder  4/13] RUN cd /tmp   && wget https://github.com/mongodb/mongo-c-driver/releases/download/1.14.0/mongo-c-driver-1.14.0  0.0s
 => CACHED [deps-builder  5/13] RUN cd /tmp   && wget -O thrift-0.12.0.tar.gz https://github.com/apache/thrift/archive/v0.12.0.tar.gz   && tar  0.0s
 => CACHED [deps-builder  6/13] RUN cd /tmp   && wget -O json-3.6.1.tar.gz https://github.com/nlohmann/json/archive/v3.6.1.tar.gz   && tar -zx  0.0s
 => CACHED [deps-builder  7/13] RUN cd /tmp   && wget -O yaml-cpp-0.6.2.tar.gz https://github.com/jbeder/yaml-cpp/archive/yaml-cpp-0.6.2.tar.g  0.0s
 => CACHED [deps-builder  8/13] RUN cd /tmp   && wget -O protobuf-3.19.4.tar.gz https://github.com/protocolbuffers/protobuf/releases/download/  0.0s
 => CACHED [deps-builder  9/13] RUN cd /tmp   && git clone --recurse-submodules -b v1.43.0 --depth 1 https://github.com/grpc/grpc.git   && cd   0.0s
 => [deps-builder 10/13] RUN cd /tmp   && wget -O opentelemetry-cpp-1.8.1.tar.gz https://github.com/open-telemetry/opentelemetry-cpp/archive/  11.8s
 => [deps-builder 11/13] RUN cd /tmp   && wget -O cpp-jwt-1.1.1.tar.gz https://github.com/arun11299/cpp-jwt/archive/v1.1.1.tar.gz   && tar -zx  2.7s 
 => [deps-builder 12/13] RUN cd /tmp   && git clone https://github.com/cpp-redis/cpp_redis.git   && cd cpp_redis && git checkout 4.3.1   && g  37.8s 
 => [deps-builder 13/13] RUN ldconfig                                                                                                           1.2s 
 => [app-builder 1/3] COPY ./ /media-microservices                                                                                              0.8s 
 => ERROR [app-builder 2/3] RUN cd /media-microservices     && mkdir -p build     && cd build     && cmake ..     && make     && make install  17.4s 
------                                                                                                                                               
 > [app-builder 2/3] RUN cd /media-microservices     && mkdir -p build     && cd build     && cmake ..     && make     && make install:              
0.858 -- The C compiler identification is GNU 5.4.0                                                                                                  
0.919 -- The CXX compiler identification is GNU 5.4.0                                                                                                
0.926 -- Detecting C compiler ABI info                                                                                                               
0.984 -- Detecting C compiler ABI info - done                                                                                                        
0.991 -- Check for working C compiler: /usr/bin/cc - skipped
0.991 -- Detecting C compile features
0.992 -- Detecting C compile features - done
0.995 -- Detecting CXX compiler ABI info
1.083 -- Detecting CXX compiler ABI info - done
1.090 -- Check for working CXX compiler: /usr/bin/c++ - skipped
1.090 -- Detecting CXX compile features
1.091 -- Detecting CXX compile features - done
1.096 -- Found LIBMEMCACHED: /usr/lib/x86_64-linux-gnu/libmemcached.so  
1.096 -- THRIFT_HOME: 
1.101 -- Thrift version: Thrift version 0.12.0
1.104 -- Found nlohmann_json: /usr/local/lib/cmake/nlohmann_json/nlohmann_jsonConfig.cmake (found suitable version "3.6.1", minimum required is "3.5.0") 
1.105 -- Looking for pthread.h
1.171 -- Looking for pthread.h - found
1.171 -- Performing Test CMAKE_HAVE_LIBC_PTHREAD
1.247 -- Performing Test CMAKE_HAVE_LIBC_PTHREAD - Failed
1.247 -- Looking for pthread_create in pthreads
1.320 -- Looking for pthread_create in pthreads - not found
1.320 -- Looking for pthread_create in pthread
1.382 -- Looking for pthread_create in pthread - found
1.383 -- Found Threads: TRUE  
1.451 -- Found OpenSSL: /usr/lib/x86_64-linux-gnu/libcrypto.so (found version "1.0.2g")  
1.483 -- Found Boost: /usr/include (found suitable version "1.58.0", minimum required is "1.54.0") found components: log log_setup date_time system filesystem thread regex chrono atomic 
1.494 -- Configuring done
1.556 -- Generating done
1.560 -- Build files have been written to: /media-microservices/build
1.586 [  1%] Building CXX object src/ComposeReviewService/CMakeFiles/ComposeReviewService.dir/ComposeReviewService.cpp.o
12.14 [  2%] Building CXX object src/ComposeReviewService/CMakeFiles/ComposeReviewService.dir/__/__/gen-cpp/ComposeReviewService.cpp.o
12.98 [  4%] Building CXX object src/ComposeReviewService/CMakeFiles/ComposeReviewService.dir/__/__/gen-cpp/media_service_types.cpp.o
14.01 [  5%] Building CXX object src/ComposeReviewService/CMakeFiles/ComposeReviewService.dir/__/__/gen-cpp/ReviewStorageService.cpp.o
14.78 [  7%] Building CXX object src/ComposeReviewService/CMakeFiles/ComposeReviewService.dir/__/__/gen-cpp/UserReviewService.cpp.o
15.55 [  8%] Building CXX object src/ComposeReviewService/CMakeFiles/ComposeReviewService.dir/__/__/gen-cpp/MovieReviewService.cpp.o
16.33 [ 10%] Linking CXX executable ComposeReviewService
16.87 CMakeFiles/ComposeReviewService.dir/ComposeReviewService.cpp.o: In function `media_service::SetUpTracer(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)':
16.87 ComposeReviewService.cpp:(.text+0x543): undefined reference to `YAML::LoadFile(std::__cxx11::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)'
16.87 ComposeReviewService.cpp:(.text+0x5f8): undefined reference to `opentelemetry::v1::exporter::trace::OStreamSpanExporter::OStreamSpanExporter(std::ostream&)'
16.89 collect2: error: ld returned 1 exit status
16.89 src/ComposeReviewService/CMakeFiles/ComposeReviewService.dir/build.make:197: recipe for target 'src/ComposeReviewService/ComposeReviewService' failed
16.89 make[2]: *** [src/ComposeReviewService/ComposeReviewService] Error 1
16.89 make[1]: *** [src/ComposeReviewService/CMakeFiles/ComposeReviewService.dir/all] Error 2
16.89 CMakeFiles/Makefile2:328: recipe for target 'src/ComposeReviewService/CMakeFiles/ComposeReviewService.dir/all' failed
16.89 Makefile:135: recipe for target 'all' failed
16.89 make: *** [all] Error 2
------

 1 warning found (use docker --debug to expand):
 - UndefinedVar: Usage of undefined variable '$LD_LIBRARY_PATH' (line 125)
Dockerfile:132
--------------------
 131 |     COPY ./ /media-microservices
 132 | >>> RUN cd /media-microservices \
 133 | >>>     && mkdir -p build \
 134 | >>>     && cd build \
 135 | >>>     && cmake .. \
 136 | >>>     && make \
 137 | >>>     && make install
 138 |     
--------------------
ERROR: failed to build: failed to solve: process "/bin/sh -c cd /media-microservices     && mkdir -p build     && cd build     && cmake ..     && make     && make install" did not complete successfully: exit code: 2